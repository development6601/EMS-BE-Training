openapi: 3.0.3
info:
  title: Event Management Backend API
  description: |
    A comprehensive backend API for event management system with user authentication, 
    event management, and participant tracking.
    
    ## Features
    - User registration and authentication
    - JWT-based access control with refresh tokens
    - Role-based authorization (Admin/User)
    - Rate limiting and security middleware
    - Comprehensive input validation
    
    ## Authentication
    The API uses JWT (JSON Web Tokens) for authentication. Include the access token 
    in the Authorization header for protected endpoints:
    ```
    Authorization: Bearer <access_token>
    ```
    
    ## Rate Limiting
    Authentication endpoints have rate limiting:
    - 100 requests per 15 minutes per IP address
    - Exceeding limits returns HTTP 429
    
    ## Test Credentials
    After running the seed script, you can use these test accounts:
    - **Admin**: admin@eventmanagement.com / Admin123!
    - **User**: john.doe@example.com / Password123!
  version: 1.0.0
  contact:
    name: API Support
    email: support@eventmanagement.com
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

servers:
  - url: http://localhost:5000
    description: Development server
  - url: https://api.eventmanagement.com
    description: Production server

tags:
  - name: Authentication
    description: User authentication and authorization endpoints
  - name: User Management
    description: User management and profile endpoints
  - name: Event Management
    description: Event CRUD operations and management endpoints
  - name: Health
    description: System health and status endpoints

paths:
  /health:
    get:
      tags:
        - Health
      summary: Health Check
      description: Check if the server is running and healthy
      responses:
        '200':
          description: Server is healthy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthResponse'
              example:
                success: true
                message: Server is running
                timestamp: '2024-01-15T10:30:00.000Z'

  /api:
    get:
      tags:
        - Health
      summary: API Information
      description: Get basic API information and available endpoints
      responses:
        '200':
          description: API information retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiInfoResponse'

  /api/auth/register:
    post:
      tags:
        - Authentication
      summary: Register New User
      description: Create a new user account with email and password
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterRequest'
            example:
              email: john.doe@example.com
              password: Password123!
              firstName: John
              lastName: Doe
              dateOfBirth: '1990-05-15'
              gender: male
              phone: '+1234567890'
              bio: 'Software developer passionate about technology'
              website: 'https://johndoe.dev'
              socialMedia:
                linkedin: 'https://linkedin.com/in/johndoe'
                twitter: 'https://twitter.com/johndoe'
                instagram: 'https://instagram.com/johndoe'
              address:
                street: '123 Main St'
                city: 'New York'
                state: 'NY'
                zipCode: '10001'
                country: 'United States'
              preferences:
                emailNotifications: true
                smsNotifications: false
                marketingEmails: false
                theme: auto
                language: en
      responses:
        '201':
          description: User registered successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
        '400':
          description: Validation error or user already exists
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: Too many requests
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/auth/login:
    post:
      tags:
        - Authentication
      summary: User Login
      description: Authenticate user with email and password
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
            example:
              email: john.doe@example.com
              password: Password123!
      responses:
        '200':
          description: Login successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Invalid credentials or account blocked
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: Too many requests
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/auth/refresh:
    post:
      tags:
        - Authentication
      summary: Refresh Access Token
      description: Get a new access token using a valid refresh token
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RefreshTokenRequest'
      responses:
        '200':
          description: Token refreshed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RefreshTokenResponse'
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Invalid or expired refresh token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/auth/logout:
    post:
      tags:
        - Authentication
      summary: Logout User
      description: Logout user by invalidating the refresh token
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LogoutRequest'
      responses:
        '200':
          description: Logout successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          description: Unauthorized - Invalid or missing access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'


  /api/auth/me:
    get:
      tags:
        - Authentication
      summary: Get Current User Profile
      description: Get the profile information of the currently authenticated user
      security:
        - bearerAuth: []
      responses:
        '200':
          description: User profile retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProfileResponse'
        '401':
          description: Unauthorized - Invalid or missing access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/users:
    get:
      tags:
        - User Management
      summary: Get All Users
      description: Retrieve all users with pagination and filtering (Admin only)
      security:
        - bearerAuth: []
      parameters:
        - name: page
          in: query
          description: Page number
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: Number of users per page
          required: false
          schema:
            type: integer
            default: 10
        - name: search
          in: query
          description: Search by name or email
          required: false
          schema:
            type: string
        - name: role
          in: query
          description: Filter by role
          required: false
          schema:
            type: string
            enum: [admin, user]
        - name: isBlocked
          in: query
          description: Filter by blocked status
          required: false
          schema:
            type: boolean
      responses:
        '200':
          description: Users retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Users retrieved successfully
                  data:
                    type: object
                    properties:
                      users:
                        type: array
                        items:
                          $ref: '#/components/schemas/User'
                      pagination:
                        type: object
                        properties:
                          currentPage:
                            type: integer
                            example: 1
                          totalPages:
                            type: integer
                            example: 5
                          totalUsers:
                            type: integer
                            example: 50
                          hasNextPage:
                            type: boolean
                            example: true
                          hasPrevPage:
                            type: boolean
                            example: false
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Admin access required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/users/stats:
    get:
      tags:
        - User Management
      summary: Get User Statistics
      description: Get user statistics for admin dashboard (Admin only)
      security:
        - bearerAuth: []
      responses:
        '200':
          description: User statistics retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: User statistics retrieved successfully
                  data:
                    type: object
                    properties:
                      totalUsers:
                        type: integer
                        example: 150
                      activeUsers:
                        type: integer
                        example: 140
                      blockedUsers:
                        type: integer
                        example: 10
                      adminUsers:
                        type: integer
                        example: 5
                      regularUsers:
                        type: integer
                        example: 145
                      recentUsers:
                        type: integer
                        example: 25
                      userGrowth:
                        type: object
                        properties:
                          last30Days:
                            type: integer
                            example: 25
                          percentage:
                            type: string
                            example: '16.67'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Admin access required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/users/{id}:
    get:
      tags:
        - User Management
      summary: Get User by ID
      description: Retrieve a specific user by ID (Admin only)
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: User ID
          schema:
            type: string
            example: 507f1f77bcf86cd799439011
      responses:
        '200':
          description: User retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: User retrieved successfully
                  data:
                    type: object
                    properties:
                      user:
                        $ref: '#/components/schemas/User'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Admin access required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    put:
      tags:
        - User Management
      summary: Update User
      description: Update user information (Admin only)
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: User ID
          schema:
            type: string
            example: 507f1f77bcf86cd799439011
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUserRequest'
            example:
              firstName: John
              lastName: Doe
              phone: '+1234567890'
              bio: 'Updated bio information'
              address:
                street: '456 Updated St'
                city: 'Los Angeles'
                state: 'CA'
                zipCode: '90210'
                country: 'United States'
      responses:
        '200':
          description: User updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: User updated successfully
                  data:
                    type: object
                    properties:
                      user:
                        $ref: '#/components/schemas/User'
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Admin access required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    delete:
      tags:
        - User Management
      summary: Delete User
      description: Delete a user account (Admin only)
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: User ID
          schema:
            type: string
            example: 507f1f77bcf86cd799439011
      responses:
        '200':
          description: User deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Admin access required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/users/{id}/block:
    put:
      tags:
        - User Management
      summary: Block/Unblock User
      description: Block or unblock a user account (Admin only)
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: User ID
          schema:
            type: string
            example: 507f1f77bcf86cd799439011
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                isBlocked:
                  type: boolean
                  description: Block status
                  example: true
              required: [isBlocked]
      responses:
        '200':
          description: User block status updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: User blocked successfully
                  data:
                    type: object
                    properties:
                      user:
                        $ref: '#/components/schemas/User'
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Admin access required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/users/profile:
    get:
      tags:
        - User Profile
      summary: Get User Profile
      description: Get current user's profile information
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Profile retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Profile retrieved successfully
                  data:
                    type: object
                    properties:
                      user:
                        $ref: '#/components/schemas/User'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    put:
      tags:
        - User Profile
      summary: Update User Profile
      description: Update current user's profile information
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateProfileRequest'
            example:
              firstName: John
              lastName: Doe
              dateOfBirth: '1990-05-15'
              gender: male
              phone: '+1234567890'
              bio: 'Software developer passionate about technology'
              website: 'https://johndoe.dev'
              socialMedia:
                linkedin: 'https://linkedin.com/in/johndoe'
                twitter: 'https://twitter.com/johndoe'
                instagram: 'https://instagram.com/johndoe'
              address:
                street: '123 Main St'
                city: 'New York'
                state: 'NY'
                zipCode: '10001'
                country: 'United States'
              preferences:
                emailNotifications: true
                smsNotifications: false
                marketingEmails: false
                theme: auto
                language: en
      responses:
        '200':
          description: Profile updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Profile updated successfully
                  data:
                    type: object
                    properties:
                      user:
                        $ref: '#/components/schemas/User'
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/events:
    get:
      tags:
        - Event Management
      summary: Get All Events
      description: Retrieve all events with pagination, filtering, and sorting
      parameters:
        - name: page
          in: query
          description: Page number
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: Number of events per page
          required: false
          schema:
            type: integer
            default: 10
        - name: search
          in: query
          description: Search by title, description, location, or tags
          required: false
          schema:
            type: string
        - name: category
          in: query
          description: Filter by event category
          required: false
          schema:
            type: string
            enum: [conference, workshop, seminar, meetup, convention, exhibition, festival, sports, music, art, technology, business, education, health, other]
        - name: status
          in: query
          description: Filter by event status
          required: false
          schema:
            type: string
            enum: [active, cancelled, completed]
        - name: isUpcoming
          in: query
          description: Filter for upcoming events only
          required: false
          schema:
            type: boolean
        - name: sortBy
          in: query
          description: Sort field
          required: false
          schema:
            type: string
            enum: [eventDate, createdAt, title]
            default: eventDate
        - name: sortOrder
          in: query
          description: Sort order
          required: false
          schema:
            type: string
            enum: [asc, desc]
            default: asc
      responses:
        '200':
          description: Events retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Events retrieved successfully
                  data:
                    type: object
                    properties:
                      events:
                        type: array
                        items:
                          $ref: '#/components/schemas/Event'
                      pagination:
                        type: object
                        properties:
                          currentPage:
                            type: integer
                            example: 1
                          totalPages:
                            type: integer
                            example: 5
                          totalEvents:
                            type: integer
                            example: 50
                          hasNextPage:
                            type: boolean
                            example: true
                          hasPrevPage:
                            type: boolean
                            example: false

    post:
      tags:
        - Event Management
      summary: Create New Event
      description: Create a new event (Admin only)
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                title:
                  type: string
                  description: Event title
                  example: JavaScript Conference 2024
                description:
                  type: string
                  description: Event description
                  example: A comprehensive conference about modern JavaScript development
                eventDate:
                  type: string
                  format: date
                  description: Event date
                  example: '2024-06-15'
                eventTime:
                  type: string
                  description: Event time (HH:MM format)
                  example: '09:00'
                location:
                  type: string
                  description: Event location
                  example: 'Convention Center, New York'
                maxParticipants:
                  type: integer
                  description: Maximum number of participants
                  example: 500
                category:
                  type: string
                  enum: [conference, workshop, seminar, meetup, convention, exhibition, festival, sports, music, art, technology, business, education, health, other]
                  description: Event category
                  example: conference
                tags:
                  type: array
                  items:
                    type: string
                  description: Event tags
                  example: [javascript, web-development, conference]
                requirements:
                  type: string
                  description: Event requirements
                  example: Basic knowledge of JavaScript
                price:
                  type: number
                  description: Event price
                  example: 99.99
                currency:
                  type: string
                  enum: [USD, EUR, GBP, INR, CAD, AUD]
                  description: Currency
                  example: USD
                isOnline:
                  type: boolean
                  description: Is this an online event?
                  example: false
                onlineLink:
                  type: string
                  description: Online event link
                  example: 'https://zoom.us/j/123456789'
                registrationDeadline:
                  type: string
                  format: date
                  description: Registration deadline
                  example: '2024-06-10'
                image:
                  type: string
                  format: binary
                  description: Event image (max 10MB)
              required: [title, description, eventDate, eventTime, location, maxParticipants, category]
      responses:
        '201':
          description: Event created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Event created successfully
                  data:
                    type: object
                    properties:
                      event:
                        $ref: '#/components/schemas/Event'
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Admin access required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/events/stats:
    get:
      tags:
        - Event Management
      summary: Get Event Statistics
      description: Get event statistics for admin dashboard (Admin only)
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Event statistics retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Event statistics retrieved successfully
                  data:
                    type: object
                    properties:
                      totalEvents:
                        type: integer
                        example: 150
                      activeEvents:
                        type: integer
                        example: 120
                      completedEvents:
                        type: integer
                        example: 25
                      cancelledEvents:
                        type: integer
                        example: 5
                      upcomingEvents:
                        type: integer
                        example: 100
                      recentEvents:
                        type: integer
                        example: 30
                      eventGrowth:
                        type: object
                        properties:
                          last30Days:
                            type: integer
                            example: 30
                          percentage:
                            type: string
                            example: '20.00'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Admin access required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/events/category/{category}:
    get:
      tags:
        - Event Management
      summary: Get Events by Category
      description: Get events filtered by category
      parameters:
        - name: category
          in: path
          required: true
          description: Event category
          schema:
            type: string
            enum: [conference, workshop, seminar, meetup, convention, exhibition, festival, sports, music, art, technology, business, education, health, other]
        - name: page
          in: query
          description: Page number
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: Number of events per page
          required: false
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: Events in category retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Events in conference category retrieved successfully
                  data:
                    type: object
                    properties:
                      events:
                        type: array
                        items:
                          $ref: '#/components/schemas/Event'
                      pagination:
                        type: object
                        properties:
                          currentPage:
                            type: integer
                            example: 1
                          totalPages:
                            type: integer
                            example: 2
                          totalEvents:
                            type: integer
                            example: 15
                          hasNextPage:
                            type: boolean
                            example: true
                          hasPrevPage:
                            type: boolean
                            example: false

  /api/events/{id}:
    get:
      tags:
        - Event Management
      summary: Get Event by ID
      description: Retrieve a specific event by ID
      parameters:
        - name: id
          in: path
          required: true
          description: Event ID
          schema:
            type: string
            example: 507f1f77bcf86cd799439011
      responses:
        '200':
          description: Event retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Event retrieved successfully
                  data:
                    type: object
                    properties:
                      event:
                        $ref: '#/components/schemas/Event'
        '404':
          description: Event not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    put:
      tags:
        - Event Management
      summary: Update Event
      description: Update event information (Admin only)
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: Event ID
          schema:
            type: string
            example: 507f1f77bcf86cd799439011
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                title:
                  type: string
                  description: Event title
                  example: Updated JavaScript Conference 2024
                description:
                  type: string
                  description: Event description
                  example: An updated comprehensive conference about modern JavaScript development
                eventDate:
                  type: string
                  format: date
                  description: Event date
                  example: '2024-07-15'
                eventTime:
                  type: string
                  description: Event time (HH:MM format)
                  example: '10:00'
                location:
                  type: string
                  description: Event location
                  example: 'Updated Convention Center, New York'
                maxParticipants:
                  type: integer
                  description: Maximum number of participants
                  example: 600
                category:
                  type: string
                  enum: [conference, workshop, seminar, meetup, convention, exhibition, festival, sports, music, art, technology, business, education, health, other]
                  description: Event category
                  example: conference
                tags:
                  type: array
                  items:
                    type: string
                  description: Event tags
                  example: [javascript, web-development, conference, updated]
                requirements:
                  type: string
                  description: Event requirements
                  example: Basic to intermediate knowledge of JavaScript
                price:
                  type: number
                  description: Event price
                  example: 129.99
                currency:
                  type: string
                  enum: [USD, EUR, GBP, INR, CAD, AUD]
                  description: Currency
                  example: USD
                isOnline:
                  type: boolean
                  description: Is this an online event?
                  example: false
                onlineLink:
                  type: string
                  description: Online event link
                  example: 'https://zoom.us/j/987654321'
                registrationDeadline:
                  type: string
                  format: date
                  description: Registration deadline
                  example: '2024-07-10'
                image:
                  type: string
                  format: binary
                  description: Event image (max 10MB)
      responses:
        '200':
          description: Event updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Event updated successfully
                  data:
                    type: object
                    properties:
                      event:
                        $ref: '#/components/schemas/Event'
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Admin access required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Event not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    delete:
      tags:
        - Event Management
      summary: Delete Event
      description: Delete an event (Admin only)
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: Event ID
          schema:
            type: string
            example: 507f1f77bcf86cd799439011
      responses:
        '200':
          description: Event deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Admin access required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Event not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/events/{id}/status:
    put:
      tags:
        - Event Management
      summary: Update Event Status
      description: Update event status (Admin only)
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: Event ID
          schema:
            type: string
            example: 507f1f77bcf86cd799439011
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                status:
                  type: string
                  enum: [active, cancelled, completed]
                  description: Event status
                  example: cancelled
              required: [status]
      responses:
        '200':
          description: Event status updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Event status updated successfully
                  data:
                    type: object
                    properties:
                      event:
                        $ref: '#/components/schemas/Event'
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Admin access required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Event not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT access token obtained from login or refresh endpoints

  schemas:
    User:
      type: object
      properties:
        _id:
          type: string
          description: Unique user identifier
          example: 507f1f77bcf86cd799439011
        email:
          type: string
          format: email
          description: User's email address
          example: john.doe@example.com
        firstName:
          type: string
          description: User's first name
          minLength: 2
          maxLength: 50
          example: John
        lastName:
          type: string
          description: User's last name
          minLength: 2
          maxLength: 50
          example: Doe
        dateOfBirth:
          type: string
          format: date
          description: User's date of birth
          example: '1990-01-15'
        gender:
          type: string
          enum: [male, female, other, prefer-not-to-say]
          description: User's gender
          example: prefer-not-to-say
        role:
          type: string
          enum: [admin, user]
          description: User's role in the system
          example: user
        isBlocked:
          type: boolean
          description: Whether the user account is blocked
          example: false
        phone:
          type: string
          description: User's phone number
          pattern: '^[\+]?[1-9][\d]{0,15}$'
          example: '+1234567890'
        bio:
          type: string
          maxLength: 500
          description: User's biography
          example: 'Software developer passionate about technology'
        website:
          type: string
          format: uri
          description: User's personal website
          example: 'https://johndoe.com'
        socialMedia:
          $ref: '#/components/schemas/SocialMedia'
        address:
          $ref: '#/components/schemas/Address'
        preferences:
          $ref: '#/components/schemas/UserPreferences'
        lastLoginAt:
          type: string
          format: date-time
          nullable: true
          description: Last login timestamp
          example: '2024-01-15T10:30:00.000Z'
        loginCount:
          type: integer
          description: Total number of logins
          example: 5
        createdAt:
          type: string
          format: date-time
          description: User creation timestamp
          example: '2024-01-15T10:30:00.000Z'
        updatedAt:
          type: string
          format: date-time
          description: User last update timestamp
          example: '2024-01-15T10:30:00.000Z'
      required: [_id, email, firstName, lastName, role, isBlocked]

    Address:
      type: object
      properties:
        street:
          type: string
          description: Street address
          maxLength: 100
          example: 123 Main Street
        city:
          type: string
          description: City name
          maxLength: 50
          example: New York
        state:
          type: string
          description: State or province
          maxLength: 50
          example: NY
        zipCode:
          type: string
          description: ZIP or postal code
          maxLength: 10
          example: '10001'
        country:
          type: string
          description: Country name
          maxLength: 50
          example: 'United States'

    SocialMedia:
      type: object
      properties:
        linkedin:
          type: string
          format: uri
          description: LinkedIn profile URL
          example: 'https://linkedin.com/in/johndoe'
        twitter:
          type: string
          format: uri
          description: Twitter profile URL
          example: 'https://twitter.com/johndoe'
        instagram:
          type: string
          format: uri
          description: Instagram profile URL
          example: 'https://instagram.com/johndoe'

    UserPreferences:
      type: object
      properties:
        emailNotifications:
          type: boolean
          description: Enable email notifications
          example: true
        smsNotifications:
          type: boolean
          description: Enable SMS notifications
          example: false
        marketingEmails:
          type: boolean
          description: Enable marketing emails
          example: false
        theme:
          type: string
          enum: [light, dark, auto]
          description: UI theme preference
          example: auto
        language:
          type: string
          maxLength: 5
          description: Language preference code
          example: en

    Event:
      type: object
      properties:
        _id:
          type: string
          description: Unique event identifier
          example: 507f1f77bcf86cd799439011
        title:
          type: string
          description: Event title
          minLength: 3
          maxLength: 100
          example: JavaScript Conference 2024
        description:
          type: string
          description: Event description
          minLength: 10
          maxLength: 1000
          example: A comprehensive conference about modern JavaScript development
        eventDate:
          type: string
          format: date
          description: Event date
          example: '2024-06-15'
        eventTime:
          type: string
          description: Event time (HH:MM format)
          pattern: '^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$'
          example: '09:00'
        location:
          type: string
          description: Event location
          minLength: 3
          maxLength: 200
          example: Convention Center, New York
        maxParticipants:
          type: integer
          description: Maximum number of participants
          minimum: 1
          maximum: 10000
          example: 500
        currentParticipants:
          type: integer
          description: Current number of participants
          minimum: 0
          example: 150
        category:
          type: string
          enum: [conference, workshop, seminar, meetup, convention, exhibition, festival, sports, music, art, technology, business, education, health, other]
          description: Event category
          example: conference
        image:
          type: string
          description: Event image URL from Cloudinary
          example: 'https://res.cloudinary.com/your-cloud/image/upload/v1234567890/event-management/events/event-1234567890-123456789.jpg'
        imagePublicId:
          type: string
          description: Cloudinary public ID for the image
          example: 'event-management/events/event-1234567890-123456789'
        status:
          type: string
          enum: [active, cancelled, completed]
          description: Event status
          example: active
        createdBy:
          type: object
          description: Event creator information
          properties:
            _id:
              type: string
              example: 507f1f77bcf86cd799439011
            firstName:
              type: string
              example: John
            lastName:
              type: string
              example: Doe
            email:
              type: string
              example: john.doe@example.com
        tags:
          type: array
          items:
            type: string
          description: Event tags
          example: [javascript, web-development, conference]
        requirements:
          type: string
          description: Event requirements
          maxLength: 500
          example: Basic knowledge of JavaScript
        price:
          type: number
          description: Event price
          minimum: 0
          example: 99.99
        currency:
          type: string
          enum: [USD, EUR, GBP, INR, CAD, AUD]
          description: Currency
          example: USD
        isOnline:
          type: boolean
          description: Is this an online event?
          example: false
        onlineLink:
          type: string
          description: Online event link
          example: 'https://zoom.us/j/123456789'
        registrationDeadline:
          type: string
          format: date
          description: Registration deadline
          example: '2024-06-10'
        isFull:
          type: boolean
          description: Whether the event is full
          example: false
        isRegistrationClosed:
          type: boolean
          description: Whether registration is closed
          example: false
        isUpcoming:
          type: boolean
          description: Whether the event is upcoming
          example: true
        createdAt:
          type: string
          format: date-time
          description: Event creation timestamp
          example: '2024-01-15T10:30:00.000Z'
        updatedAt:
          type: string
          format: date-time
          description: Event last update timestamp
          example: '2024-01-15T10:30:00.000Z'
      required: [_id, title, description, eventDate, eventTime, location, maxParticipants, category, status, createdBy]

    RegisterRequest:
      type: object
      properties:
        email:
          type: string
          format: email
          description: User's email address
          example: john.doe@example.com
        password:
          type: string
          minLength: 6
          description: User's password
          example: Password123!
        firstName:
          type: string
          minLength: 2
          maxLength: 50
          description: User's first name
          example: John
        lastName:
          type: string
          minLength: 2
          maxLength: 50
          description: User's last name
          example: Doe
        dateOfBirth:
          type: string
          format: date
          description: User's date of birth (optional)
          example: '1990-01-15'
        gender:
          type: string
          enum: [male, female, other, prefer-not-to-say]
          description: User's gender (optional)
          example: prefer-not-to-say
        phone:
          type: string
          pattern: '^[\+]?[1-9][\d]{0,15}$'
          description: User's phone number (optional)
          example: '+1234567890'
        bio:
          type: string
          maxLength: 500
          description: User's biography (optional)
          example: 'Software developer passionate about technology'
        website:
          type: string
          format: uri
          description: User's personal website (optional)
          example: 'https://johndoe.com'
        socialMedia:
          $ref: '#/components/schemas/SocialMedia'
        address:
          $ref: '#/components/schemas/Address'
        preferences:
          $ref: '#/components/schemas/UserPreferences'
      required: [email, password, firstName, lastName]

    LoginRequest:
      type: object
      properties:
        email:
          type: string
          format: email
          description: User's email address
          example: john.doe@example.com
        password:
          type: string
          description: User's password
          example: Password123!
      required: [email, password]

    RefreshTokenRequest:
      type: object
      properties:
        refreshToken:
          type: string
          description: Valid refresh token
          example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
      required: [refreshToken]

    LogoutRequest:
      type: object
      properties:
        refreshToken:
          type: string
          description: Refresh token to invalidate
          example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
      required: [refreshToken]

    UpdateUserRequest:
      type: object
      properties:
        firstName:
          type: string
          minLength: 2
          maxLength: 50
          description: User's first name
          example: John
        lastName:
          type: string
          minLength: 2
          maxLength: 50
          description: User's last name
          example: Doe
        dateOfBirth:
          type: string
          format: date
          description: User's date of birth
          example: '1990-01-15'
        gender:
          type: string
          enum: [male, female, other, prefer-not-to-say]
          description: User's gender
          example: male
        phone:
          type: string
          pattern: '^[\+]?[1-9][\d]{0,15}$'
          description: User's phone number
          example: '+1234567890'
        bio:
          type: string
          maxLength: 500
          description: User's biography
          example: 'Software developer passionate about technology'
        website:
          type: string
          format: uri
          description: User's personal website
          example: 'https://johndoe.com'
        socialMedia:
          $ref: '#/components/schemas/SocialMedia'
        address:
          $ref: '#/components/schemas/Address'
        preferences:
          $ref: '#/components/schemas/UserPreferences'

    UpdateProfileRequest:
      type: object
      properties:
        firstName:
          type: string
          minLength: 2
          maxLength: 50
          description: User's first name
          example: John
        lastName:
          type: string
          minLength: 2
          maxLength: 50
          description: User's last name
          example: Doe
        dateOfBirth:
          type: string
          format: date
          description: User's date of birth
          example: '1990-01-15'
        gender:
          type: string
          enum: [male, female, other, prefer-not-to-say]
          description: User's gender
          example: male
        phone:
          type: string
          pattern: '^[\+]?[1-9][\d]{0,15}$'
          description: User's phone number
          example: '+1234567890'
        bio:
          type: string
          maxLength: 500
          description: User's biography
          example: 'Software developer passionate about technology'
        website:
          type: string
          format: uri
          description: User's personal website
          example: 'https://johndoe.com'
        socialMedia:
          $ref: '#/components/schemas/SocialMedia'
        address:
          $ref: '#/components/schemas/Address'
        preferences:
          $ref: '#/components/schemas/UserPreferences'

    AuthResponse:
      type: object
      properties:
        success:
          type: boolean
          description: Indicates if the request was successful
          example: true
        message:
          type: string
          description: Response message
          example: User registered successfully
        data:
          type: object
          properties:
            user:
              $ref: '#/components/schemas/User'
            accessToken:
              type: string
              description: JWT access token (expires in 15 minutes)
              example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
            refreshToken:
              type: string
              description: JWT refresh token (expires in 7 days)
              example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
          required: [user, accessToken, refreshToken]
      required: [success, message, data]

    RefreshTokenResponse:
      type: object
      properties:
        success:
          type: boolean
          description: Indicates if the request was successful
          example: true
        message:
          type: string
          description: Response message
          example: Token refreshed successfully
        data:
          type: object
          properties:
            accessToken:
              type: string
              description: New JWT access token (expires in 15 minutes)
              example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
            refreshToken:
              type: string
              description: New JWT refresh token (expires in 7 days)
              example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
          required: [accessToken, refreshToken]
      required: [success, message, data]

    UserProfileResponse:
      type: object
      properties:
        success:
          type: boolean
          description: Indicates if the request was successful
          example: true
        message:
          type: string
          description: Response message
          example: User profile retrieved successfully
        data:
          type: object
          properties:
            user:
              $ref: '#/components/schemas/User'
          required: [user]
      required: [success, message, data]

    SuccessResponse:
      type: object
      properties:
        success:
          type: boolean
          description: Indicates if the request was successful
          example: true
        message:
          type: string
          description: Response message
          example: Operation completed successfully
      required: [success, message]

    ErrorResponse:
      type: object
      properties:
        success:
          type: boolean
          description: Indicates if the request was successful
          example: false
        message:
          type: string
          description: Error message
          example: An error occurred
        errors:
          type: string
          description: Detailed error information (for validation errors)
          example: Email is required, Password must be at least 6 characters long
      required: [success, message]

    HealthResponse:
      type: object
      properties:
        success:
          type: boolean
          description: Indicates if the server is healthy
          example: true
        message:
          type: string
          description: Health status message
          example: Server is running
        timestamp:
          type: string
          format: date-time
          description: Current server timestamp
          example: '2024-01-15T10:30:00.000Z'
      required: [success, message, timestamp]

    ApiInfoResponse:
      type: object
      properties:
        success:
          type: boolean
          description: Indicates if the request was successful
          example: true
        message:
          type: string
          description: API information message
          example: Event Management API
        version:
          type: string
          description: API version
          example: 1.0.0
        endpoints:
          type: object
          properties:
            auth:
              type: string
              description: Authentication endpoints
              example: /api/auth
            health:
              type: string
              description: Health check endpoint
              example: /health
      required: [success, message, version, endpoints]
